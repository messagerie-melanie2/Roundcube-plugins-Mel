@import "root.less";

/** BODY **/
body{
    .restore-font();
    color:var(--main-text-color-base);
    
    &>#layout {
        &>div.sidebar{

            ul{
                .treelist{
                    li.context-source:not(.selected){
                        &>a{
                            background-color: var(--secondary-bckg-color) !important;
                        }

                        &>div{
                            &>a{
                                background-color: var(--secondary-bckg-color) !important;
                            }
                        }
                    }
                }
            }

            .listing{
                tbody{
                    tr.context-source:not(.selected) > td{
                        background-color: var(--secondary-bckg-color) !important;
                    }
                }

                &:not(.treelist){
                    li.context-source:not(.selected){
                        background-color: var(--secondary-bckg-color) !important;
                    }
                }
            }
        }
    }
}

/** PRINCIPAL **/

button,
input,
optgroup,
select,
textarea,
.popover {
    .restore-font();
}

a{
    color:var(--main-link-color);

    :hover{
        color:var(--main-link-hover-color)
    }
}

/** LAYOUT **/

#layout-sidebar{
    .mel-no-border();
    .mel-main-colors-important();
    
    &>.header{
        /** HEADER **/
        .mel-main-colors-important();
    }

    .ui-datepicker{
        &.ui-widget-content{
            .ui-state-default{
                /** CALENDRIER **/
                color: var(--secondary-text-color);
            }
        }

        .ui-state-default{
            /** CALENDRIER **/
            color: var(--secondary-text-color);
        }
    }


}

#layout-list {
    .mel-no-border();
    .mel-tiercary-colors-important();

    &>.header{
        /** HEADER **/
        .mel-tiercary-colors-important();
    }
}

#layout {
    &>div{
        &>.header{
            .mel-no-border();

            a.button{
                color:var(--secondary-text-color);
            }
        }
    }

    .header{
        /** HEADER **/
        a{
            &.button, 
            &.options,
            &.select,
            &.threads{
                color:var(--secondary-text-color);
            }
            
        }
    }

    #layout-content {
        &>.header{
            a{
                &.button{
                    color: black;
                }
            }
        }
    }
}

/** HEADER **/

.header{
    a.button.icon:not(.disabled):hover{
        .mel-tiercary-colors();
    }

    a.toolbar-button.button.icon:not(.disabled):hover,
    a.toolbar-button:hover
    {
        .mel-secondary-colors-important();
    }
}

/** MENU **/

.menu {

    &.pagenav{
        &.pagenav-list{
            &+.navlist{
                background-color: var(--main-bckg-color);
            }
        }
    }

    a:not(.disabled):focus,
    a:not(.disabled):hover
    {
        .mel-secondary-colors-important();
    }

    a {
        /** ICONS **/
        &.icofont-plus-circle:before{
            content: "\efc0"!important;
            font-family: var(--secondary-icon-font)!important;
        }
        &.icofont-question-circle:before
        {
            content: "\efca"!important;
            font-family: var(--secondary-icon-font)!important;
        }

        &.icofont-favourite:before
        {
            content: "\ef25"!important;
            font-family: var(--secondary-icon-font)!important;
        }

        &.icofont-search:before
        {
            content: "\ed1b"!important;
            font-family: var(--secondary-icon-font)!important;
        }
    }

}

/** LISTES **/

ul.treelist{
    li {
        &.selected{
            &>div{
                &>a{
                    .mel-tiercary-colors();
                }
            }

            &>a{
                .mel-tiercary-colors();
            }
        }

        &.context-source:not(.selected){
            &>a{
                background-color: var(--secondary-bckg-color) !important;
            }

            &>div{
                &>a{
                    background-color: var(--secondary-bckg-color) !important;
                }
            }
        }
    }
}

.popupmenu{
    .listing{
        li{
            &.selected{
                .mel-secondary-colors();
            }
        }
    }
}

.listing{

    &:not(.treelist){
        li {
            &.context-source{
                &:not(.selected){
                    background-color: var(--secondary-bckg-color) !important;  
                }
            }
        }
    }

    .scroller>&{
        li {
            a{
                color:var(--secondary-text-color);
            }
        }
    }

    ul&{
        li{
            ul {
                border-top: none;
            }
        }
    }

    li{
        border: none;
        &.selected{
            .mel-secondary-colors();

            &>div{
                &>*{
                    /** CALENDRIER **/
                    background-color: var(--tierciary-bckg-color) !important;
                    border: none !important;
                }
            }
        }

        &>div{

            &.calendar{
                .calname{
                    &::before{
                        /** CALENDRIER **/
                        opacity: 0.7;
                    }
                }
            }

            &.readonly{
                a{
                    &:first-child{
                        &::after{
                            /** CALENDRIER **/
                            font-size: .8em !important;
                            background-color: var(--invisible) !important;
                            color: #80D5C6 !important;
                        }
                    }
                }
            }

            a{
                &.quickview{
                    &::before{
                        /** CALENDRIER **/
                        color: #80D5C6 !important;
                    }
                }
            }
        }

        &.readonly:not(.virtual)
        {
            &>div{
                a{
                    &:first-child{
                        a::after{
                            /** CALENDRIER **/
                            font-size: .8em !important;
                            background-color: var(--invisible) !important;
                            color: #80D5C6 !important;
                        }
                    }
                }
            }
        }

    }

    tr{
        &.selected{
            td{
                .mel-secondary-colors();
            }
        }
    }

    tbody{
        tr{
            &.context-source:not(.selected){
                &>td{
                    background-color: var(--secondary-bckg-color) !important;
                }
            }
        }

        td{
            color:var(--secondary-text-color);
            border: none;

            a{
                color:var(--secondary-text-color);
            }
        }
    }
}

.listing-info {
    color:var(--secondary-text-color);
}

li {
    &#settingstabpluginmel_doubleauth{
        &>a{
            &::before{
                content: " ";
            }
        }
    }

    &#settingstabpluginmel_suggestion_box{
        &>a{
            &::before{
                content: " ";
            }
        }
    }

    &.mel{
        &>a{
            &::before{
                content: " ";
            }
        }
    }
}

/** AUTRE **/

a.button.icon:not(.disabled):focus{
    .mel-tiercary-colors();
}

/** MESSAGES **/

#message-header{
    .short-header {
        display: flex;

        img.contactphoto {
            margin: 0 1rem 0 0;
            border-radius: 50%;
            width: 4rem;
            height: 4rem;
            object-fit: cover;
        }
    }
}

.messagelist{
    tr{
        &:hover{
            span{
                &.unflagged{
                    &::before{
                        font-size: 90%;
                    }
                }
            }
        }
    }

    td {
        &.subject{
            flex-wrap: wrap;

            span{
                line-height: 1.8em;

                &.date{
                    font-size: 85%;
                    padding-top: 4px;
                }
            }

        }

        &.labels{
            flex-basis: 100%;
            border: none!important;
        }
    }

    span{
        &.attachment{
            span{
                &::before{
                    font-size: 80%;
                    color:var(--other-text-color);
                }

                &.flagged{
                    &::before{
                        font-size: 90%;
                    }
                }
            }
        }
    }
}

.folderlist{

    ul&{
        &.treelist{
            li {
                ul {
                    li {
                        a {
                            padding-left: 1.5em;
                        }

                        div {
                            &.treetoggle{
                                left: 0;
                            }
                        }

                        li {
                            a{
                                padding-left: 3em;
                            }

                            div {
                                &.treetoggle{
                                    left: 1.5em;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    li{
        &.mailbox{
            .unreadcount {
                background: var(--roundbadge-bckg-color);
                color: #484D7A;
                font-size: 0.9rem;
                border-radius: 5rem;
            }
        }

        &.boite{
            &>a{
                &::before{
                    content: "\f01c";
                    font-weight: 900;
                }
            }
        }
    }
}

/** POPUP **/

.popup {
    &>div {
        &>div {
            #directorylist{
                &>li{
                    background-color: var(--secondary-bckg-color);

                    &:hover{
                        background-color: var(--tierciary-bckg-color);
                    }

                    &>a{
                        &:hover{
                            background-color: var(--invisible);
                        }
                    }

                }
            }
        }
    }
}

/** CALENDRIER **/
/** JOKER **/
.listing li > div.folder .listname::before,
.listing li > div span.subscribed::before,
.listing li > div.readonly a:first-child::after,
.listing li.readonly:not(.virtual) > div a:first-child::after,
.listing li > div.calendar .calname::before,
fieldset.categories .input-group a.button.create::before,
.fc button.prev::before,
.fc button.next::before,
.fc .fc-time i::before,
#eventshow .event-partstat .changersvp::before,
.availability span::before,
.calendar-scheduler .schedule-buttons .next-slot::after,
.resources-dialog .listing li.resource > a::before,
#devices-table td:not(.selection)::before,
#delegate-table td::before,
a.btn.fromcloud::before,
li > a.icon.saveas::before,
a.button.filesaveall::before,
a.button.saveas::before,
.folderlist li.mailbox a.subscription.subscribed::before,
.filelist tr.session > td.name::after,
.filelist tbody td.filename span::before,
.document-editor-header #collaborators a.button.add::before,
.editors-dialog table td.options a.delete::before,
#kolabnoteslist td.title::before,
#taglist li::before,
#tagsform option::before,
.rsvp-status.loading::before,
.rsvp-status.declined::before,
.rsvp-status.tentative::before,
.rsvp-status.accepted::before,
.rsvp-status.delegated::before,
.rsvp-status.needs-action::before,
.attendee::before,
.edit-attendees-table th.invite label::before,
#event-status-badge span::before,
#alarm-display h3::before,
#alarm-display .alarm-actions a::before,
.listing li > div.tasklist .listname::before,
#tasklist .childtoggle::before,
#tasklist .taskhead:not(.flagged):hover span.flagged::before,
#tasklist .taskhead.flagged span.flagged::before,
#taskshow.status-flagged h2::before {
    font-size: 1em !important;
}
/** FIN JOKER **/

div.calendar-invitebox{
    .rsvp-status{
        font-weight: bold;
    }
}

.calendar-datepicker{
    .ui-datepicker-header{
        background-color: var(--tierciary-bckg-color) !important;
        border: none !important;
    }

    .ui-datepicker{
        background-color: var(--tierciary-bckg-color) !important;
        border: none !important;
    }
}

body {
    &.task-calendar
    {
        .ui-datepicker-inline{
            .ui-datepicker-activerange{
                background-color: var(--main-bckg-color) !important;
            }

            .ui-datepicker-week-col{
                color: #b3b6b7  !important;
            }
        }
    }
}

.ui-datepicker {
    &.ui-widget-content{

        a{
            &.ui-state-active{
                background-color: var(--roundbadge-bckg-color) !important;
                color: #000 !important;

                &.ui-state-highlight{
                    background-color: var(--roundbadge-bckg-color) !important;
                    color: #000 !important;
                }
            }
        }

        .ui-state-highlight{
                .mel-secondary-colors-important();
            }
        }    

    a{
        &.ui-state-active{
            &.ui-state-highlight{
                background-color: var(--roundbadge-bckg-color) !important;
                color: #000 !important;
            }
        }
    }

    th{
        padding: .7em 0 !important;
    }

    select{
        &.ui-datepicker-year{
            width: 5em !important;
            margin-left: 15px;
        }
    }

    .ui-state-highlight{
        .mel-secondary-colors-important();
    }
}

/*** Full Calendar ***/

.fc-event {
    border-width: 1px 7px 1px 1px !important;
    font-size: 12px !important;
}

.fc {
    .fc-event{
        .fc-title{
            font-weight: 400 !important;
            padding: 3px;
        }

        .fc-bg{
            opacity: 0 !important;
        }
    }
}

.fc-event-location {
	padding: 1px 3px;
}

.fc-agenda-divider-inner {
	height: 0 !important;
}

.fc-time-grid-event {
	opacity: 0.8;

    .fc-time {
        text-align: center;
    }
}

/******Fin cal*******/

/** MEL ADD **/

.mel-add{
    display:inline-block;
    width: 107px;
    height: 32px;
    border-radius: 50px;
    background-color: var(--main-bckg-color);
    color: var(--secondary-text-color);
    padding: 5px 10px;
    padding-top: 5px;
    padding-right: 10px;
    padding-bottom: 5px;
    padding-left: 10px;
    cursor: pointer;
    transition: all 0.1s ease-in;
    float:right;
    font-size: 1rem;
    font-weight: initial;

    &:hover{
        background-color: var(--tierciary-bckg-color);
    }

    &.left{
        float: left;
    }

    &>span {
        &>.plus{
            position: absolute;
            top: 3px;
            right: -43px;
        }
    }
}

/** FORM **/

select {
    &.mel-select{
        &.form-control{
            border-radius: 60px;
            background-color: #F0F0F0;
            border: none;
            color:var(--main-text-color);
        }
    }
}

/** CUSTOM HTML **/

/* SEPARATE */

separate {
    border-top-color: #5C5F7B;
    border-top-style: solid;
    border-top-width: thin;
    margin: 20px 30px;
}

/* FRAMED_ITEM */

framed_item {
    &>.framed_item{
        padding:15px;
    }
}

/** CONTACTS **/

#contacts-table{
    &>tbody{
        &>tr{
            &>td{
                &.contactgroup{
                    background-color: var(--secondary-bckg-color);
                    &:hover{
                        background-color: var(--tierciary-bckg-color);
                    }
                }

                &.contact{
                    background-color: var(--secondary-bckg-color);
                    &:hover{
                        background-color: var(--tierciary-bckg-color);
                    }
                }
            }

            &.selected{
                &>td{
                    &.contactgroup{
                        background-color: var(--tierciary-bckg-color);
                    }

                    a.contact{
                        background-color: var(--tierciary-bckg-color);
                    }
                }
            }
        }
    }
}

#showcontacts{
    &::before
    {
        vertical-align: sub;
        margin: 0!important;
    }
}

#_button-back-adressbook
{
    position: absolute;
    left: 5px;
}

#button-back-adressbook
{
    #_button-back-adressbook();

    &:hover{
        color:#2C3054!important;
    }
}
#button-back-adressbook2
{
    #_button-back-adressbook();

    &:hover{
        color:#484D7A !important;
        background-color: var(--invisible)!important;
    }
}

.task-addressbook{

    &.action-plugin-annuaire{
        .searchbar{
            form{
                &:after{
                    content: none!important;
                }
            }
        }
    }

    &>#layout{
        #layout-sidebar{
            &>.header{
                height: 120px;
            }
        }

        #layout-list{
            &>.header{
                height: 120px;
            }
        }
    }

    .searchbar{
        border-radius: 60px;
        border:none!important;

        &:after{
            content: "\f002";
            height: 36px;
            color: var(--main-text-color);
            margin: 0 .75rem 0 0;
        
            font-size: 1.25em;
            display: block;
            float: left;
            width: 1.18em;
            font-family: 'Icons';
            font-style: normal;
            font-weight: 900;
            text-decoration: inherit;
            text-align: center;
            speak: none;
            font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
        }

        form{
            &::before{
                content: none;
            }
        }
    }

    .button{
        &.reset{
            display:block!important;
            color: var(--main-text-color) !important;
        
            &:hover{
                color: var(--secondary-text-color)!important;
            }
        }

        &.options{
            color: var(--main-text-color) !important;

            &:hover{
                color: var(--secondary-text-color)!important;
            }
        }
    }
}

.searchgroup{
    &>center{
        &span{
            font-size: larger;
        }
    }
}

.filtergroup{
    &>center{
        &span{
            font-size: larger;
        }
    }

    &>.row{
        margin-top: -11px;

        &>div{
            &>select{
                border-radius: 60px;
            }
        }
    }
}

/** TACHES **/

#tasklist{
    li{
        &.taskitem{
            div{
                &.taskhead{
                    &.selected{
                        background-color:var(--secondary-bckg-color)!important;
                    }

                    &.complete{
                        span.title{
                            color: var(--secondary-text-color)!important;
                        }
                    }
                }
            }
        }
    }
}

#taskmenu{
    a{
        &:hover {
            &>sup{
                &>span{
                    color:#484D7A;
                }
            }
        }

        &.selected{
            &:hover{
                &>sup {
                    &>span{
                        color:#484D7A;
                    }
                }
            }

            &>sup {
                &>span{
                    color:#484D7A;
                }
            }
        }
    }

    .action-buttons{
        a {
            &:hover{
                &>sup {
                    &>span{
                        color:#484D7A;
                    }
                }    
            }
        }
    }
}

/** PARAMETRES **/

#settingstabpluginmel_resources{
    .noselect();

    &>a{
        ::before{
            font-family:var(--secondary-icon-font);
            content: "\eaa0";
        }
    }

    &>._selected{
        &>a{
            ::before{
                font-family:var(--secondary-icon-font);
                content: "\ea99";
            }
        }  
    }
}

#settingstabpluginmel_statistics{
    .noselect();

    &>a{
        ::before{
            font-family:var(--secondary-icon-font);
            content: "\eaa0";
        }
    }

    &>._selected{
        &>a{
            ::before{
                font-family:var(--secondary-icon-font);
                content: "\ea99";
            }
        }  
    }
}

/** SEPARATIONS ***/

.row.separate,
.btn.separate,
.mel_separate
{
    margin-top:5px;
}

/** ROUNDBADGE **/

.roundbadge{
    display: inline-block;
    height: 12px;
    width: 12px;
    line-height: 12px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    background-color: lightgray;
    text-align: center;
    font-weight: bold;
    font-size: 6px;

    &.no-weight{
        font-weight: normal;
    }

    &.large{
      height: 30px;
      width: 30px;
      line-height: 30px;
      font-size: initial;
    }

    &.clear{
      background-color: #F0F0F0;
      border-color: #F0F0F0;
    }

    &.dark{
      background-color: var(--main-bckg-color);
    }

    &.setalign{
      top: -1px;
      left: -6px;
      position: absolute;
    }

    &.warning{
        background-color: var(--warning-color);
    }

    &.danger{
        background-color: var(--danger-color);
    }

    &.royal{
        background-color:var(--royal-color);
    }

    &.lightgreen{
        background-color: var(--roundbadge-bckg-color);
    }

    &.hover {
        &.tick{
            cursor: pointer;

            &:hover{
                background-color: var(--roundbadge-bckg-color);
            
                &::before{
                    content: "\eed8"!important;
                }
            }
        }
    }

    &.menu{
        top: -5px;
        position: absolute;
        height: 15px;
        width: 15px;
        line-height: 16px;
        font-size: 8px;
        color: #2C3054;
        left: -10px;
    }

    a&{
        &.link{
            color:var(--secondary-text-color);
            text-decoration: none;
            font-weight: normal;

            &:hover{
                background-color: var(--tierciary-bckg-color);
            }
        }


    }

}

.dwp-round{
    width: 64px;
    height: 64px;
    background-color: var(--roundbadge-bckg-color);
    display: block;
    border-radius: 100%;
    text-align: center;
    color: inherit!important;
    text-decoration: none!important;
    -webkit-mask-image: linear-gradient(rgba(0, 0, 0, 1.0), white);

    &>span{
        line-height: 64px;
        font-size: x-large;
    }

    &> img{
        height: 100%;
    }
    
}

/** LOGIN **/

.task-error-login{
    &>#layout{
        &>#layout-content{
            margin-top:60px;
        }
    }
}

/** BOUTTONS **/

html{
    &@{layout-small}{
        .floating-action-buttons{
            top:0px;

            &>a{
                background-color: var(--invisible);
                box-shadow: none;
                transition: all 0.1s ease-in;
            
                &:hover{
                    color:#2C3054!important;
                    background-color: var(--tierciary-bckg-color) !important;
                }
            }
        }
    }
}

body{
    &.task-mail{
        .floating-action-buttons
        {
            display: none;
        }
    }
}

.mel-return{
    .mel-all-ease-in-animation();
    cursor: pointer;

    &:hover{
        color:var(--danger-color);
    }
}


/** INPUT TEXT **/
._red-star{
    /** MIXIN **/
    content: "*";
    color:red;
}

.red-star{
    &::before{
        ._red-star();
    }

    &.mel-before-remover
    {
        color:red;
    }
}

.red-star-after{
    &::before{
        ._red-star();
    }
}

/** IMAGES **/
img {
    &.menu-image {
        width: 30px;
        margin-left: -26px;
        margin-right: 15px;
    }
}