function getCoord(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}function setTap(){tap=!0,setTimeout(function(){tap=!1},500)}function open_message_from_left_panel(e){e!=window.current_uid&&(rcmail.set_message(e,"unread",!1),window.current_uid=e,window.previous_page="current_page",storePosition.topCoordinate=$("#mail-list-left-panel").scrollTop(),rcmail.show_message_mobile(window.current_uid,{}))}var startX,startY,tap,swipePanelLeft,swipePanelRight,swipePage,swipeMessage,swipe_timer,tapTimer,isTapHold;$(document).on("touchstart","#mail-list-left-panel #messagelist li",function(e){startX=getCoord(e,"X"),startY=getCoord(e,"Y")}).on("touchend","#mail-list-left-panel #messagelist li",function(e){Math.abs(getCoord(e,"X")-startX)<20&&Math.abs(getCoord(e,"Y")-startY)<20&&(e.preventDefault(),open_message_from_left_panel($(document.getElementById($(this).attr("id"))).data("uid"))),setTap()}).on("click","#mail-list-left-panel #messagelist li",function(e){tap||open_message_from_left_panel($(document.getElementById($(this).attr("id"))).data("uid")),e.preventDefault()}),$(document).on("touchstart",".ui-content",function(e){startX=getCoord(e,"X"),startY=getCoord(e,"Y"),30>startX&&$(".ui-panel.ui-panel-position-left").length?(swipePanelLeft=!0,swipePanelRight=!1,swipePage=!1):startX>$(document).width()-30&&$(".ui-panel.ui-panel-position-right").length&&(swipePanelLeft=!1,swipePanelRight=!0,swipePage=!1)}).on("touchend",".ui-content",function(e){Math.abs(getCoord(e,"Y")-startY)<50&&Math.abs(getCoord(e,"X")-startX)>50&&swipePanelLeft?(e.preventDefault(),$(".ui-panel.ui-panel-position-left").panel("open"),swipePanelLeft=!1,swipePanelRight=!1,swipePage=!1):Math.abs(getCoord(e,"Y")-startY)<50&&Math.abs(startX-getCoord(e,"X"))>50&&swipePanelRight&&(e.preventDefault(),$(".ui-panel.ui-panel-position-right").panel("open"),swipePanelLeft=!1,swipePanelRight=!1,swipePage=!1)});